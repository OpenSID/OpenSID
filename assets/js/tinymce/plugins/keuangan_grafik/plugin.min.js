tinymce.PluginManager.add('keuangan_grafik', function( editor, url ) {
	editor.addButton( 'keuangan_grafik', {
		text: 'Grafik Keuangan',
		icon: false,
		type: 'menubutton',
		menu: [
		{
			text: 'Grafik Realisasi',
			onclick: function() {
				var url = BASE_URL + "index.php/keuangan/cek_tahun";
				$.ajax({
	        type: "GET",
	        url: url,
	        dataType: "json",
	        processData: true,
	        success: function (data) {
	        	editor.windowManager.open( {
							title: 'Pilih Tahun Laporan',
							body: [
			          {
			          	type   : 'listbox',
			          	name   : 'tahun',
			          	label  : 'Tahun',
			          	values : data,
			          },
		          ],
		          onsubmit: function( e ) {
		          	editor.insertContent('[[grafik-RP-APBD,' + e.data.tahun +']]');
		          },
		          width: 400,
		          height: 140
			      } )
	        },
	        error: function (xhr, status, error) {
	          alert("Error! " + xhr.status + "\n" + error);
	          console.log(xhr);
	        }
	      });
			}
		},
		]
	});
});
